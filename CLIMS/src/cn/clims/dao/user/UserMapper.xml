<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.clims.dao.user.UserMapper">
	<select id="getLoginUser" resultType="user" parameterType="user">
		select * from clims_user
			where userCode=#{userCode} and userPassword=#{userPassword} 
	</select>
	
	<select id="userCodeIsExist" parameterType="user" resultType="int">
		select count(1) from clims_user
		<trim prefix="where" prefixOverrides="and | or">
			<if test="userCode !=null and userCode !=''">
				and userCode = #{userCode}
			</if>
		</trim>
	</select>
	
	<update id="modifyUser" parameterType="user">
		update clims_user 
			<set>
				<if test="userCode != null and userCode != ''">userCode = #{userCode},</if>
				<if test="userPassword != null and userPassword != ''">userPassword = #{userPassword},</if>
				<if test="userName != null and userName != ''">userName = #{userName},</if>
				<if test="gender != null">gender = #{gender},</if>
				<if test="userRole != null">userRole = #{userRole},</if>
				<if test="email != null and email != ''">email = #{email},</if>
				<if test="phone != null and phone != ''">phone = #{phone},</if>
				<if test="dept != null and phone != ''">phone = #{phone},</if>
				<if test="createdBy != null">createdBy = #{createdBy},</if>
				<if test="creationDate != null">creationDate = #{creationDate},</if>
				<if test="modifyBy != null">modifyBy = #{modifyBy},</if>
				<if test="modifyDate != null">modifyDate = #{modifyDate},</if>
			</set>
			where id = #{id}
	</update>
</mapper>